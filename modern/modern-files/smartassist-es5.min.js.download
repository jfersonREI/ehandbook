!function(t,e,i,n,o,r,s,a,p,l,d,u){"use strict";function c(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function h(t,e){return function(i,n){e(i,n,t)}}var g=function(){function t(t,e,i,n,o,r){this.itemId=t,this.text=e,this.subTitle=i,this.displayOrder=n,this.isEnabled=o,this.isVisible=r,this.steps=new Array,this.isOpen=!1}return t}(),m=function(){function t(t,e,i,n,o,r,s,a){this.proceedNext=!1,this.showMessage=!1,this.message="",this.userId="",this.subTitle="",this.stepId=t,this.text=e,this.displayOrder=i,this.apiUrlId=n,this.apiParameters=o,this.typeCode=s,this.isEnabled=a,this.redirectUrlId=r}return t}(),f=function(){function t(t,e,i,n){this.stepId=t,this.text=e,this.errorMessage=i,this.redirectUrlId=n}return t}(),v=[{provide:e.BaseUrl,useValue:"https://hrsaUTL15-is.amer.reisystems.com/SmartAssist/"}],y=function(){function t(t,e){this.http=t,this.baseUrl=e,this.smaApiUrl=this.baseUrl+"api/smartassist/"}return t.prototype.getItems=function(t){var e={externalSystemId:t};return this.http.get(this.smaApiUrl+"items",{params:e},!0)},t.prototype.getErrors=function(t){var e={stepId:t};return this.http.get(this.smaApiUrl+"errors",{params:e},!0,!1,!0)},t.prototype.executeValidation=function(t,e){return this.http.get(t,{params:e},!0,!1,!0)},t.prototype.getGrantSubmissions=function(t,e){var i={grantId:e};return this.http.get(t,{params:i},!0,!1,!0)},t.prototype.getGrantUsersWithPrivileges=function(t,e,i){var n={grantId:e,privileges:i};return this.http.get(t,{params:n},!0,!1,!0)},t.prototype.getOrgUsersWithPrivileges=function(t,e,i){var n={orgId:e,privileges:i};return this.http.get(t,{params:n},!0,!1,!0)},t=c([i.Injectable(),h(0,i.Inject(e.PlatformHttp)),h(1,i.Inject(e.BaseUrl))],t)}(),b=function(){function t(t,e,i,n,o,r,s){this.type="",this.name="",this.type=t,this.name=e,this.properties=i,this.eventEmitters=o,this.parentEvents=r,this.stringLiterals=n,this.rawProperties=s}return t}(),S=function(){function t(){}return t}(),I=function(){function t(t,e){this.urlService=t,this.http=e,this.queryUrlId="",this.validate=new i.EventEmitter,this.subscribed=!1,this.validationStatusCode="",this.validationUrl="",this.hasUrl=!1,this.options=new l.AutoSuggestOptions,this.options.displayKeys=["GrantNum","OrgName","City","State"],this.options.valueKey="GrantNum",this.options.textKey="GrantNum",this.options.formatKeys=[" -",",",","],this.options.labelText="Grant Number: ",this.queryUrlId=""}return t.prototype.ngAfterViewChecked=function(){var t=this;this.continueApiUrlId&&!this.hasUrl&&(this.hasUrl=!0,this.urlService.getUrl(this.continueApiUrlId).subscribe(function(e){t.validationUrl=e})),this.continueEvent&&!this.subscribed&&(this.continueEvent.subscribe(function(e){if(e&&t.validationUrl.length>0)if(t.autoSuggest.enteredText){var i={grantNum:t.autoSuggest.enteredText};t.http.getHttpResponse(t.validationUrl,{params:i},!0,!1,!0).subscribe(function(e){e&&(t.validationStatusCode=e.status.toString(),200===e.status||210===e.status&&!t.lalTypeMessage?t.validate.emit(e.json()):210===e.status&&t.lalTypeMessage?t.autoSuggest.validationMessage=t.lalTypeMessage:t.autoSuggest.validationMessage="Enter a valid grant number. Example: H80CS00123")})}else t.autoSuggest.validationMessage="Enter a valid grant number. Example: H80CS00123"}),this.subscribed=!0)},c([i.Input()],t.prototype,"queryUrlId"),c([i.Input()],t.prototype,"continueApiUrlId"),c([i.Input()],t.prototype,"continueEvent"),c([i.Input()],t.prototype,"lalTypeMessage"),c([i.Output()],t.prototype,"validate"),c([i.ViewChild(l.AutoSuggestComponent)],t.prototype,"autoSuggest"),t=c([i.Component({selector:"search-by-grant",template:'<pfm-autosuggest [options]="options" [queryUrlId]="queryUrlId"></pfm-autosuggest>'}),h(0,i.Inject(e.UrlService)),h(1,i.Inject(e.PlatformHttp))],t)}(),w=function(){function t(t,e){this.urlService=t,this.http=e,this.queryUrlId="",this.validate=new i.EventEmitter,this.subscribed=!1,this.validationStatusCode="",this.validationUrl="",this.hasUrl=!1,this.orgModel=new x,this.options=new l.AutoSuggestOptions,this.options.displayKeys=["orgName","uei"],this.options.valueKey="orgId",this.options.textKey="orgName",this.options.formatKeys=["  (",")"],this.options.filterKeys=["orgName","uei","duns"],this.options.labelText="Organization Name: ",this.queryUrlId=""}return t.prototype.ngAfterViewChecked=function(){var t=this;this.continueEvent&&!this.subscribed&&(this.continueEvent.subscribe(function(e){e&&(t.autoSuggest&&!t.autoSuggest.enteredText.trim()?t.autoSuggest.validationMessage="Enter a valid Organization Name/UEI":(t.autoSuggest&&t.autoSuggest.selectedValue?t.orgModel.OrgId=t.autoSuggest.selectedValue:t.autoSuggest&&t.autoSuggest.data&&t.autoSuggest.data.length>0&&t.autoSuggest.data.forEach(function(e){var i=t.autoSuggest.enteredText.trim();e.orgName.trim().toLowerCase()!==i.toLowerCase()&&e.uei.trim().toLowerCase()!==i.toLowerCase()&&e.duns.trim()!==i||(t.orgModel.OrgId=e.orgId)}),t.validate.emit(t.orgModel)))}),this.subscribed=!0)},t.prototype.getAutoSuggestValidationMessage=function(){return this.autoSuggest.validationMessage},t.prototype.setAutoSuggestEnteredText=function(t){this.autoSuggest.enteredText=t},t.prototype.setAutoSuggestSelectedValue=function(t){this.autoSuggest.selectedValue=t},t.prototype.setAutoSuggestData=function(t){this.autoSuggest.data=t},t.prototype.getOrgModelOrgId=function(){return this.orgModel.OrgId},c([i.Input()],t.prototype,"queryUrlId"),c([i.Input()],t.prototype,"continueEvent"),c([i.Output()],t.prototype,"validate"),c([i.ViewChild(l.AutoSuggestComponent)],t.prototype,"autoSuggest"),t=c([i.Component({selector:"pfm-sma-searchbyorg",template:'<pfm-autosuggest [options]="options" [queryUrlId]="queryUrlId"></pfm-autosuggest>'}),h(0,i.Inject(e.UrlService)),h(1,i.Inject(e.PlatformHttp))],t)}(),x=function(){function t(t,e,i){this.OrgId=t,this.OrgName=e,this.Uei=i}return t}(),C=function(){function t(t,e){this.urlService=t,this.smaService=e,this.isValid=new i.EventEmitter,this.showError=!1,this.message="",this.link="",this.linkText="",this.title=""}return t.prototype.ngOnInit=function(){this.stepId=this.stepId?1*this.stepId:0,this.executeValidation()},t.prototype.executeValidation=function(){var t=this;this.urlService.getUrl(this.urlId).subscribe(function(e){t.smaService.executeValidation(e,t.urlParam).subscribe(function(e){t.sendValidation(e)},function(e){t.throwError(e)})})},t.prototype.throwError=function(t){this.showError=!0,this.message="An unexpected error occured. Please try again.",this.isValid.emit(!1)},t.prototype.sendValidation=function(t){var e=this;void 0===t||null===t?this.throwError(null):t?this.isValid.emit(!0):this.smaService.getErrors(this.stepId).subscribe(function(t){e.message=t[0].errorMessage.replace("{title}",e.title.toLowerCase()),e.linkText=t[0].text,e.showError=!0,t[0].redirectUrlId&&e.urlService.getUrl(t[0].redirectUrlId).subscribe(function(t){e.link=t,e.redirectParam&&(e.link=e.getUrl(t,e.redirectParam))}),e.isValid.emit(!1)},function(t){e.throwError(t)})},t.prototype.getUrl=function(t,e){if(!t)return"";var i="";if(!e)return t;for(var n in e)if(e[n]instanceof Array&&e[n].length>1)for(var o=0,r=e[n];o<r.length;o++){var s=r[o];i+=n.toString()+"="+(s.toUpperCase()||"").toString()}else i+=0===i.length?n.toString()+"="+(e[n].toUpperCase()||"").toString():"&"+n.toString()+"="+(e[n].toUpperCase()||"").toString();return t.trim()+(-1===t.indexOf("?")?"?":"&")+i.trim()},c([i.Input("url")],t.prototype,"urlId"),c([i.Input("url-param")],t.prototype,"urlParam"),c([i.Input()],t.prototype,"stepId"),c([i.Input("redirect-param")],t.prototype,"redirectParam"),c([i.Input()],t.prototype,"title"),c([i.Output()],t.prototype,"isValid"),t=c([i.Component({selector:"sma-validate",template:'<div *ngIf="showError" >\n        <pfm-navigation-link [infoText]="message" [link]="link" [linkText]="linkText"></pfm-navigation-link>\n    </div>'}),h(0,i.Inject(e.UrlService)),h(1,i.Inject(y))],t)}(),E=function(){function t(t,e){this.urlService=t,this.smaService=e,this.gridId="grid12345"}return t.prototype.ngOnInit=function(){var t=this,i=new p.GridOptions;i.enableSearchPanel=!1,i.enableFiltering=!1,i.enablePaging=!1,i.tableSummary="List of active submissions for the grant",i.noRecordMessage="There are no active submissions for this grant.",this.gridOptions=i;var n=new Array;n.push(new p.GridColumn("DeliverableName","Submission",!1,!1)),n.push(new p.GridColumn("TrackingNumber","Tracking #",!1,!1)),n.push(new p.GridColumn("SubmissionDeadline","Deadline",!1,!1)),n.push(new p.GridColumn("SubmissionStatus","Status",!1,!1));var o=[this.redirectUrlId,this.apiUrlId];this.urlService.getUrls(o).subscribe(function(i){if(i&&i.length===o.length){var r=i[0],s=i[1],a=new p.ContextMenuGroup(null,"Action"),l=new e.NavigationItemModel(null,"Select Submission",null,"Select Submission",null,null);l.destination=r+"?resourceType1=deliverable&resourceId1={DeliverableId}&typeSub=&program={ProgramTypeCode}",l.isDefault=!0,l.enabledCondition="{RequestExtensionAllowed} == true && {UserHasPermission} == true",l.tooltipCondition="{RequestExtensionAllowed} == false",l.tooltipAltCondition="{UserHasPermission} == false",l.tooltipConditionText="Deadline extension is not allowed for this submission.",l.tooltipAltConditionText="You don't have permissions to work on this submission.",a.items=[l];var d=new p.GridColumn(null,"Option",!1,!1);d.columnType=2,d.datasource=[a],n.push(d),t.gridColumns=n,t.smaService.getGrantSubmissions(s,t.apiParameters.GrantId).subscribe(function(e){if(e){var i=e;i.forEach(function(t){t.SubmissionDeadline=new Date(t.SubmissionDeadline).toLocaleDateString(),t.contextMenu=JSON.parse(JSON.stringify(d.datasource))}),t.dataSource=i}})}})},c([i.Input()],t.prototype,"apiUrlId"),c([i.Input()],t.prototype,"apiParameters"),c([i.Input()],t.prototype,"redirectUrlId"),c([i.Input()],t.prototype,"stepId"),t=c([i.Component({selector:"pfm-sma-submission-list",styles:[":host /deep/ .btn-link { padding: 0 !important; font-size: 1em; }",":host /deep/ .btn-link.disabled { pointer-events: auto; }",":host /deep/ .btn-link.disabled:hover,.btn-link.disabled:focus { text-decoration:none !important; }","p { color: #515151; margin-bottom: 5px; }"],template:'<br/> <p>Select a submission for deadline extension</p><br/>\n    <pfm-grid [uniqueId]="gridId"\n                  [(datasource)]="dataSource"\n                  [columns]="gridColumns"\n                  [options]="gridOptions"\n                  autoBind="false">\n        </pfm-grid>'}),h(0,i.Inject(e.UrlService)),h(1,i.Inject(y))],t)}(),M=function(){function t(t,e){this.urlService=t,this.smaService=e,this.hasPermission=!1,this.redirectUrl=null,this.queryString=null,this.isLoading=!1,this.gridId="grid_grant_hasPrivilege",this.dataSource=[]}return t.prototype.ngOnInit=function(){var t=this,e=new p.GridOptions;e.enableSearchPanel=!1,e.enableFiltering=!1,e.enablePaging=!1,e.tableSummary="List of grant users who have the administer privilege",e.noRecordMessage="There are no users with the Grant Users - Administer privilege for this grant. Please reach out to HRSA Contact Center for assistance.",this.gridOptions=e;var i=new Array;i.push(new p.GridColumn("FullName","Name",!1,!1)),i.push(new p.GridColumn("Email","Email",!1,!1)),i.push(new p.GridColumn("Phone","Phone #",!1,!1)),this.gridColumns=i;var n=[this.redirectUrlId,this.apiUrlId];this.urlService.getUrls(n).subscribe(function(e){if(e&&e.length===n.length){var i=e[0],o=e[1],r=[];t.privilegeList.split(",").forEach(function(t){return r.push(parseInt(t,10))}),t.smaService.getGrantUsersWithPrivileges(o,t.apiParameters.GrantId,r).subscribe(function(e){if(e){t.isLoading=!0;var n=e;t.hasPermission=n.CurrentUserHasPrivileges,!0===t.hasPermission?(t.queryString="?grantId="+t.apiParameters.GrantId+"&PRoleId=18&savestate=true",t.redirectUrl=i+t.queryString):t.dataSource=n.GrantUsers}})}})},c([i.Input()],t.prototype,"apiUrlId"),c([i.Input()],t.prototype,"apiParameters"),c([i.Input()],t.prototype,"redirectUrlId"),c([i.Input()],t.prototype,"privilegeList"),c([i.Input()],t.prototype,"successMsg"),c([i.Input()],t.prototype,"errorMsg"),c([i.Input()],t.prototype,"stepId"),t=c([i.Component({selector:"pfm-sma-grant-privilege",styles:[],template:'\n                <div *ngIf="!isLoading" class="widget-content">\n                    <span class="sr-only"  role="alert" aria-live="assertive">Smart Assist Content is loading</span>\n                    <md-spinner style="height: 239px;  width: 110px; margin-left: 200px; margin-top: 18px;" mode="indeterminate" color="primary"></md-spinner>\n                </div>\n\n                <div *ngIf="hasPermission">\n                    <p>{{successMsg}}</p> \n                    <br>\n                    <a [href]="redirectUrl" [target] = "_blank">Proceed to the "Users- List" page</a>   \n                    <br>\n                </div>\n\n                <div *ngIf="!hasPermission && isLoading">                          \n                    <p>{{errorMsg}}</p>\n                    <pfm-grid [uniqueId]="gridId"\n                        [(datasource)]="dataSource"\n                        [columns]="gridColumns"\n                        [options]="gridOptions"\n                        [autoBind]="false">\n                    </pfm-grid> \n                </div>             \n              '}),h(0,i.Inject(e.UrlService)),h(1,i.Inject(y))],t)}(),O=function(){function t(t,e){this.urlService=t,this.smaService=e,this.hasPermission=!1,this.redirectUrl=null,this.queryString=null,this.isLoading=!1,this.gridId="grid_org_hasPrivilege",this.dataSource=[]}return t.prototype.ngOnInit=function(){var t=this,e=new p.GridOptions;e.enableSearchPanel=!1,e.enableFiltering=!1,e.enablePaging=!1,e.tableSummary="List of users who have Manage Users privilege for this organization",e.noRecordMessage="There are no users within your organization with the Manage Users privilege. Please reach out to HRSA Contact Center for assistance.",this.gridOptions=e;var i=new Array;i.push(new p.GridColumn("FullName","Name",!1,!1)),i.push(new p.GridColumn("Email","Email",!1,!1)),i.push(new p.GridColumn("Phone","Phone #",!1,!1)),this.gridColumns=i;var n=[this.redirectUrlId,this.apiUrlId];this.urlService.getUrls(n).subscribe(function(e){if(e&&e.length===n.length){var i=e[0],o=e[1],r=[];t.privilegeList.split(",").forEach(function(t){return r.push(parseInt(t,10))}),t.smaService.getOrgUsersWithPrivileges(o,t.apiParameters.OrgId,r).subscribe(function(e){if(e){t.isLoading=!0;var n=e;t.hasPermission=n.CurrentUserHasPrivileges,!0===t.hasPermission?(t.queryString="?orgId="+t.apiParameters.OrgId+"&PRoleId=18&pageMode=MU",t.redirectUrl=i+t.queryString):t.dataSource=n.GrantUsers}})}})},c([i.Input()],t.prototype,"apiUrlId"),c([i.Input()],t.prototype,"apiParameters"),c([i.Input()],t.prototype,"redirectUrlId"),c([i.Input()],t.prototype,"privilegeList"),c([i.Input()],t.prototype,"successMsg"),c([i.Input()],t.prototype,"errorMsg"),c([i.Input()],t.prototype,"stepId"),t=c([i.Component({selector:"pfm-sma-org-privilege",styles:[],template:'\n                <div *ngIf="!isLoading" class="widget-content">\n                    <span class="sr-only"  role="alert" aria-live="assertive">Smart Assist Content is loading</span>\n                    <md-spinner style="height: 239px;  width: 110px; margin-left: 200px; margin-top: 18px;" mode="indeterminate" color="primary"></md-spinner>\n                </div>\n\n                <div *ngIf="hasPermission">\n                    <p>{{successMsg}}</p> \n                    <br>\n                    <a [href]="redirectUrl" [target] = "_blank">Proceed to the "Users- List" page</a>   \n                    <br>\n                </div>\n\n                <div *ngIf="!hasPermission && isLoading">                          \n                    <p>{{errorMsg}}</p>\n                    <pfm-grid [uniqueId]="gridId"\n                        [(datasource)]="dataSource"\n                        [columns]="gridColumns"\n                        [options]="gridOptions"\n                        [autoBind]="false">\n                    </pfm-grid> \n                </div>             \n              '}),h(0,i.Inject(e.UrlService)),h(1,i.Inject(y))],t)}(),U=function(){function t(){}return t=c([i.NgModule({imports:[o.CommonModule,s.FormsModule,n.MdProgressSpinnerModule,p.GridModule,l.ControlsModule],declarations:[I,C,E,M,O,w],exports:[I,C,E,M,O,w],providers:[e.DataService,y],entryComponents:[I,C,E,M,O,w]})],t)}(),P=function(){function t(t,e){this.resourceLoader=t,this.http=e,this.resourceLoader.get=function(t){return e.get(t).toPromise().then(function(t){return t._body})}}return t.prototype.getValue=function(t,e,i){var n=Object.assign({},e),o=Object.assign({},i);if("object"!=typeof n[t])return n[t];if(0===Object.keys(n[t]).length)return"";var r=Object.assign({},n[t]);return Object.keys(r).forEach(function(t){var e=o?o[t]:n[t];r[t]=e||""}),r},t.prototype.deepCopy=function(t){var e;if(null==t||"object"!=typeof t)return t;if(t instanceof Object){e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=this.deepCopy(t[i]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},t.prototype.buildTemplate=function(t,e){var i=this;if(void 0===t||null===t||"component"!==t.type&&""===t.name){var n=new S;return n.template="",n.values=e,n}var o=this.deepCopy(e),r=t.properties,s="<"+t.name,a=null;if(r){var p=Object.keys(r);p.forEach(function(t){a=i.getValue(r[t],e,e.outputModel);var n=e.contentModel.properties[t];o.hasOwnProperty(n)?o[n]=a:o.contentModel.properties[t]=a,a&&(s+="object"==typeof a?" ["+t+"]=\"properties['"+t+"']\"":" ["+t+"]=\"'"+a+"'\"")})}if(t.stringLiterals){var p=Object.keys(t.stringLiterals);p.forEach(function(t){a&&(s+=" ["+t+"]=\"stringLiterals['"+t+"']\"")})}if(t.rawProperties){var p=Object.keys(t.rawProperties);p.forEach(function(i){if(a){var n=Object.assign({},t.rawProperties[i]);Object.keys(n).forEach(function(i){e.outputModel[t.rawProperties[n[i]]]&&(n[i]=e.outputModel[t.rawProperties[n[i]]])}),s+=" ["+i+"]=\"rawProperties['"+i+"']\""}})}if(t.eventEmitters){var l=Object.keys(t.eventEmitters);l.forEach(function(e){a=i.getValue(e,t.eventEmitters),s+=" ("+e+')="'+a+'"'})}if(t.parentEvents){var l=Object.keys(t.parentEvents);l.forEach(function(e){a=i.getValue(e,t.parentEvents),s+=" ["+e+']="'+a+'"'})}var d=new S;return d.template=s+="></"+t.name+">",d.values=o,d},t=c([i.Injectable(),h(0,i.Inject(r.ResourceLoader)),h(1,i.Inject(a.Http))],t)}(),k=function(){function t(t,e,i){this.compiler=t,this.resourceLoader=e,this.http=i,this.resourceLoader.get=function(t){return i.get(t).toPromise().then(function(t){return t._body})}}return t.prototype.createComponentFactory=function(t,e,i){var n,o=this,r=this.createNewComponent(t,e,i),s=this.createComponentModule(r);return new Promise(function(t){o.compiler.compileModuleAndAllComponentsAsync(s).then(function(e){n=e.componentFactories.find(function(t){return t.componentType===r}),t(n)}).catch(function(t){console.log(t)})})},t.prototype.createNewComponent=function(t,e,n){return function(){function o(){var t=this;this.successEventEmitted=new i.EventEmitter,this.errorEventEmitted=new i.EventEmitter,this.goToNextStepEvent=new i.EventEmitter,this.childOutput=new i.EventEmitter,this._continueEvent=new d.BehaviorSubject(!1),this.properties=Object.assign({},e.properties),this.properties&&Object.keys(this.properties).forEach(function(e){t.properties[e]=n[t.properties[e]]}),this.rawProperties=Object.assign({},e.rawProperties),this.rawProperties&&Object.keys(this.rawProperties).forEach(function(e){Object.keys(t.rawProperties[e]).forEach(function(i){n.outputModel[i]&&(t.rawProperties[e][i]=n.outputModel[i])})}),this.stringLiterals=Object.assign({},e.stringLiterals)}return o.prototype.handleChildEvent=function(t){switch(typeof t){case"boolean":!0===t?this.successEventEmitted.emit(this.entity):this.errorEventEmitted.emit(this.entity);break;case"string":t.length>0?this.successEventEmitted.emit(t):this.errorEventEmitted.emit(t);break;default:t?this.successEventEmitted.emit(t):this.errorEventEmitted.emit(t)}},o.prototype.handleChildOutput=function(t){this.childOutput.emit(t)},o.prototype.handleGoToNextStep=function(t){this.goToNextStepEvent.emit(t)},o.prototype.handleSuccessEvent=function(t){this.successEventEmitted.emit(t)},o.prototype.handleErrorEvent=function(t){this.errorEventEmitted.emit(t)},c([i.Input()],o.prototype,"entity"),c([i.Output()],o.prototype,"successEventEmitted"),c([i.Output()],o.prototype,"errorEventEmitted"),c([i.Output()],o.prototype,"goToNextStepEvent"),c([i.Output()],o.prototype,"childOutput"),o=c([i.Component({selector:"sma-dynamic-component",template:t})],o)}()},t.prototype.createComponentModule=function(t){return function(){function n(){}return n=c([i.NgModule({imports:[o.CommonModule,e.CoreModule,s.FormsModule,l.ControlsModule,U],declarations:[t]})],n)}()},t=c([i.Injectable(),h(0,i.Inject(r.JitCompiler)),h(1,i.Inject(r.ResourceLoader)),h(2,i.Inject(a.Http))],t)}(),j=function(){function t(t,e,i,n){this.dialogRef=t,this.contentBuilder=e,this.templateBuilder=i,this.urlService=n,this.headerText="",this.parentModel=new g,this.isLastStep=!1,this.activeStep=new m,this.showLoadingIcon=!0,this.hasError=!1}return t.prototype.ngOnInit=function(){this.activeStepIndex=0,this.headerText=this.headerText||this.parentModel.subTitle||this.parentModel.text,this.setBorder(),this.refreshOverlayContent(0)},t.prototype.ngOnDestroy=function(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null)},t.prototype.setBorder=function(){null!=document.getElementsByClassName("mat-dialog-container")[0]?document.getElementsByClassName("mat-dialog-container")[0].classList.add("sma-dialog-container"):null!=document.getElementsByClassName("md-dialog-container")[0]&&document.getElementsByClassName("md-dialog-container")[0].classList.add("sma-dialog-container")},t.prototype.refreshOverlayContent=function(t,e){var i=this;if(this.componentRef&&(this.componentRef.destroy(),this.componentRef=null),this.hasError=!1,this.showLoadingIcon=!0,this.isLastStep=this.parentModel.steps.length-1===t,this.activeStep=this.parentModel.steps[t],this.activeStepIndex=t,this.activeStep.proceedNext=!1,this.activeStep.outputModel=e,this.activeStep.subTitle=this.headerText,3===this.activeStep.typeCode)this.redirect(this.activeStep,this.activeStep.outputModel);else{var n=this.templateBuilder.buildTemplate(this.activeStep.contentModel,this.activeStep);this.contentBuilder.createComponentFactory(n.template,this.activeStep.contentModel,n.values).then(function(t){try{i.componentRef=i.dynamicComponentTarget.createComponent(t),2!==i.activeStep.typeCode&&(i.showLoadingIcon=!1)}catch(t){console.log("ERROR CREATING COMPONENT: "),console.log(t)}i.componentRef&&(i.componentRef.instance.entity=e||i.activeStep,i.componentRef.instance.childOutput.subscribe(function(t){i.activeStep.outputModel=t}),i.componentRef.instance.successEventEmitted.subscribe(function(t){i.activeStep.proceedNext=!0,i.showLoadingIcon=!1,i.hasError=!1,2===i.activeStep.typeCode?i.refreshOverlayContent(i.activeStepIndex+1,i.activeStep.outputModel):i.activeStep.outputModel=t}),i.componentRef.instance.errorEventEmitted.subscribe(function(t){i.activeStep.proceedNext=!1,i.showLoadingIcon=!1,i.hasError=!0}),i.componentRef.instance.goToNextStepEvent.subscribe(function(t){i.hasError=!1,"object"==typeof t&&(i.activeStep.outputModel=t),i.refreshOverlayContent(i.activeStepIndex+1,i.activeStep.outputModel)}))}),document.getElementById("dialogTopClose").focus()}},t.prototype.onKeyDown=function(t,e){var i=t.which||t.keyCode;t.shiftKey||13!==i&&32!==i||("continue"===e?this.onContinue(t):this.onCancel(t,e))},t.prototype.onCloseButtonKeyDown=function(t){var e=t.which||t.keyCode;t.shiftKey||13!==e&&32!==e||this.closeDialog(t)},t.prototype.closeDialog=function(t){this.dialogRef.close(),document.getElementById("sma-widget-item"+this.parentModel.itemId).focus(),t.preventDefault()},t.prototype.onContinue=function(t){this.componentRef.instance._continueEvent.next(!0),this.activeStep.proceedNext?this.refreshOverlayContent(this.activeStepIndex+1,this.activeStep.outputModel):this.activeStep.showMessage?(console.log("message",this.activeStep.showMessage),t.preventDefault()):t.preventDefault()},t.prototype.onCancel=function(t,e){var i=this;if(this.activeStepIndex>0&&"back"===e){var n=this.parentModel.steps.filter(function(t){return 1===t.typeCode&&t.displayOrder<i.activeStep.displayOrder}).slice(-1)[0],o=this.parentModel.steps.indexOf(n),r=0===o?void 0:n.outputModel;this.refreshOverlayContent(o,r)}else this.closeDialog(t)},t.prototype.redirect=function(t,e){var i,n=this;t.apiParameters&&(i=this.templateBuilder.getValue("apiParameters",t,e)),this.urlService.getUrl(t.redirectUrlId).subscribe(function(t){var e=n.getUrl(t,i);window.location.assign(e)})},t.prototype.getUrl=function(t,e){if(!t)return"";var i="";if(!e)return t;for(var n in e)if(e[n]instanceof Array&&e[n].length>1)for(var o=0,r=e[n];o<r.length;o++){var s=r[o];i+=n.toString()+"="+(s||"").toString()}else i+=0===i.length?n.toString()+"="+(e[n]||"").toString():"&"+n.toString()+"="+(e[n]||"").toString();return t.trim()+(-1===t.indexOf("?")?"?":"&")+i.trim()},c([i.Input()],t.prototype,"headerText"),c([i.Input()],t.prototype,"parentModel"),c([i.ViewChild("dynamicContentPlaceHolder",{read:i.ViewContainerRef})],t.prototype,"dynamicComponentTarget"),t=c([i.Component({encapsulation:i.ViewEncapsulation.None,selector:"sma-overlay-subitem",styles:[".sma-dialog-container{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12);display:block;padding:0;border-radius:5px 5px 5px 5px!important;border:7px solid #828282!important;box-sizing:border-box;overflow:auto;max-width:80vw;width:100%;height:100%}[mat-dialog-content],[md-dialog-content]{display:block;padding:0 24px;margin:0;max-height:65vh;overflow:auto}.sma-header-text{font-size:1.1em;padding:8px 0;border-bottom:1px solid #e5e5e5;color:#515151;font-weight:700;margin-left:-9px;margin-right:-8px}.md-dialog-container{padding:0}.sma-overlay-button{color:#fff;background:#337bb4 url(https://hrsaUTL15-is.amer.reisystems.com/SmartAssist/images/hrsa_theme_sprite_01.png) repeat-x 0 -1156px;height:22px;border:1px solid #2f6688;cursor:pointer;letter-spacing:.45px;margin:0 2px 0 0;padding:2px 8px 4px}.sma-overlay-button[disabled]{opacity:.65;cursor:not-allowed;color:#d0c1c1}.sma-overlay-button:active:not([disabled]),.sma-overlay-button:focus:not([disabled]),.sma-overlay-button:hover:not([disabled]){background:#f6f7df!important;border:1px solid #d1d2af!important;color:#262711!important}.sma-overlay-pageaction{background-color:#f5f5f5;display:block;float:left;margin-left:-24px;width:109%;padding:10px}"],template:'<a href="" id="dialogTopClose" tabindex="0" class="close" role="button" (click)="closeDialog($event)" style="opacity:1" (keydown)="onCloseButtonKeyDown($event)">\n    <img id="imgClose" src="https://hrsaUTL15-is.amer.reisystems.com/SmartAssist/images/close_1.png" style="height:35px" alt="Close Window">\n</a>\n<div id="windowtitle" class="mtitle" data-title="Smart Assist" style="font-size:16px">Smart Assist</div>\n<div style="height:5px"></div>\n<div md-dialog-content>\n    <h3 class="sma-header-text">{{headerText}}</h3>\n\n    \x3c!--<span *ngIf="showLoadingIcon" class="sr-only" role="alert" aria-live="assertive">smart assist overlay content is loading</span>--\x3e\n    \x3c!--CONTENT GOES HERE--\x3e\n    <form>\n        <div #dynamicContentPlaceHolder></div>\n        <br /> \n    </form>\n    <md-spinner *ngIf="showLoadingIcon" style="height: 60px; width: 90%;" mode="indeterminate" color="primary"></md-spinner>\n    <div class="sma-overlay-pageaction">\n        <div class="btnLeft">\n            <input *ngIf="activeStepIndex===0" id="sma-overlay-cancel-button" type="submit" value="Cancel" (click)="onCancel($event, \'close\')"  (keydown)="onKeyDown($event, \'close\')" class="sma-overlay-button">\n            <input *ngIf="activeStepIndex>0" id="sma-overlay-cancel-button" type="submit" value="Back" (click)="onCancel($event, \'back\')" (keydown)="onKeyDown($event, \'back\')" class="sma-overlay-button">\n        </div>\n        <div class="btnRight" *ngIf="parentModel">\n            <input *ngIf="!isLastStep" id="sma-overlay-submit-button" type="submit" value="Continue" (click)="onContinue($event)"  (keydown)="onKeyDown($event,\'continue\')" class="sma-overlay-button" [disabled]="hasError || showLoadingIcon" >\n        </div>\n    </div>\n</div>'}),h(0,i.Inject(n.MdDialogRef)),h(1,i.Inject(k)),h(2,i.Inject(P)),h(3,i.Inject(e.UrlService))],t)}(),L=function(){function t(t,e){this.service=t,this.dialogService=e,this.rowCount=8,this.skin="Home",this.isLoading=!0,this.items=[]}return Object.defineProperty(t.prototype,"hasItems",{get:function(){return this.items.length>0},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.service.getItems(this.externalSystemId).subscribe(function(e){t.items=e,t.isLoading=!1})},t.prototype.onKeyDown=function(t,e){var i=t.which||t.keyCode;t.shiftKey||13!==i?t.shiftKey||32!==i||t.preventDefault():(this.showOverlay(t,e),t.preventDefault())},t.prototype.showOverlay=function(t,e){!e.isEnabled||e.isOpen?event.preventDefault():(this.dialogService.create(j,{width:"600px",disableClose:!0}).subscribe(function(t){e.isOpen=!e.isOpen}),e.isOpen=!e.isOpen,this.dialogService.getComponentInstance().parentModel=e)},c([i.Input()],t.prototype,"rowCount"),c([i.Input()],t.prototype,"skin"),c([i.Input()],t.prototype,"externalSystemId"),t=c([i.Component({selector:"sma-widget-item",styles:[".widget{overflow:hidden}#sma-widget-list{list-style:none;padding-left:0;margin-top:10px;float:left}#sma-widget-list .sma-widget-listitem{line-height:14px;padding-bottom:10px;float:left}#sma-widget-list .sma-widget-listitem a{color:#014c8c}.disabledLink{color:#414141!important;cursor:default!important;text-decoration:none!important}#sma-widget-list{overflow-y:auto;padding-right:10px;padding-left:8px;width:98%}#sma-widget-list .sma-widget-listitem{padding-left:10px;clear:both;width:99%}#sma-widget-list a{cursor:pointer}#sma-widget-list .sma-widget-listitem:before{content:url(https://hrsaUTL15-is.amer.reisystems.com/SmartAssist/images/arrow.gif);margin-left:-10px;padding-left:7px;position:relative;top:-2px;left:-6px;float:left}.home-skin{width:21%;margin-left:10px;background-color:#fff}.home-skin .sma-widget-title{font-size:16px;font-weight:700;font-family:Open Sans,sans-serif;color:#fff;background-color:#257bb0;margin:0 -10px;padding:10px}.home-skin #sma-widget-list{height:251px;padding-left:0}.help-skin .sma-widget-title{background-color:#f2fdff;font-family:Arial,sans-serif;font-weight:700;font-size:14px;background-image:url(https://hrsaUTL15-is.amer.reisystems.com/SmartAssist/images/usability-spritesheet.png);background-position:-8px -958px;background-repeat:no-repeat;padding-left:45px;padding-top:14px;padding-bottom:14px;margin-bottom:0}.help-skin .widget-content{padding:5px 15px 0;background-color:#fff}.help-skin #sma-widget-list{height:195px;list-style-type:none;padding-left:5px;padding-top:0;margin:0;display:inline-block;vertical-align:top;min-width:50%}.help-skin #sma-widget-list .sma-widget-listitem{padding-top:5px;padding-bottom:5px}"],
template:'<div class="widget" [class.home-skin]="skin === \'Home\'" [class.help-skin]="skin !== \'Home\'">\n    <h3 class="sma-widget-title">Smart Assist</h3>\n    <div *ngIf="!isLoading" class="widget-content">\n        <div *ngIf="hasItems" id="sma-widget-list" class="slim-scroll" tabindex="-1">\n            <div class="sma-widget-listitem" *ngFor="let item of items| slice:0:rowCount; let i = index;" >\n                <a *ngIf="!item.isEnabled" class="disabledLink" tabindex="0" role="link" aria-disabled="true" href="javascript:void(0);"\n                    [attr.id] ="\'sma-widget-item\' + item.itemId">\n                    {{item.text}}\n                </a>\n                <a *ngIf="item.isEnabled" tabindex="0" role="link"\n                    [attr.id] ="\'sma-widget-item\' + item.itemId"\n                    (click)="showOverlay($event, item)" \n                    (keydown)="onKeyDown($event,item)">\n                    {{item.text}}\n                </a>\n            </div>\n        </div>\n    </div>\n    <div *ngIf="isLoading" class="widget-content">\n        <span class="sr-only"  role="alert" aria-live="assertive">smart assist widget is loading</span>\n        <md-spinner style="height: 239px;  width: 110px; margin-left: 60px; margin-top: 18px;" mode="indeterminate" color="primary"></md-spinner>\n    </div>\n</div>'}),h(0,i.Inject(y)),h(1,i.Inject(l.DialogService))],t)}(),T=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[k]}},t=c([i.NgModule({imports:[U,o.CommonModule,e.CoreModule,s.FormsModule],declarations:[],exports:[],providers:[P]})],t)}(),A=function(){function t(){}return t=c([i.NgModule({declarations:[j,L],exports:[j,L],imports:[u.BrowserModule,o.CommonModule,s.FormsModule,n.MaterialModule,n.MdProgressSpinnerModule,e.CoreModule,T.forRoot()],providers:[r.COMPILER_PROVIDERS,l.DialogService,v,y],entryComponents:[j]})],t)}();t.SmartAssistItemModel=g,t.SmartAssistStepModel=m,t.SmartAssistErrorModel=f,t.Sma_Token_Providers=v,t.SmartAssistService=y,t.SmaWidgetComponent=L,t.SmaWidgetModule=A,t.SmaContentModel=b,t.SmaContentBuilder=k,t.SmaTemplateBuilder=P,t.SmaContentModule=T,t.SearchByGrantComponent=I,t.SearchByOrgComponent=w,t.SmaControlModule=U}(this.sma_components=this.sma_components||{},pfm_ng_core,vendor._angular_core,vendor._angular_material,vendor._angular_common,vendor._angular_compiler,vendor._angular_forms,vendor._angular_http,pfm_ng_components,pfm_ng_controls,vendor._rxjs,vendor._angular_platformBrowser);

