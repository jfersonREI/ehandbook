var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(e,t,n,i,s,o){"use strict";function r(e,t,n,i){var s,o=arguments.length,r=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(r=(o<3?s(r):o>3?s(t,n,r):s(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t){return function(n,i){t(n,i,e)}}var a,u,d=function(){function e(e,t,n,i,s,o,r,c,l,a,u){this.pageSize=5,this.userId=e,this.groupId=n,this.pageSize=i,this.userTypeCode=t,this.viewAllPageId=s,this.resourceValue=o,this.resourceTypeCode=r,this.querystringParam=c,this.title=l,this.description=a,this.tooltip=u}return e}(),p=function(){function e(){}return e}(),f=function(){function e(e,t){this.isOpen=!1,this.id=e,this.text=t,this.items=new Array}return Object.defineProperty(e.prototype,"hasItem",{get:function(){return null!==this.items&&this.items.length>0},enumerable:!0,configurable:!0}),e}(),m=function(){function e(){}return e}(),g=function(e){function t(){var t=e.call(this)||this;return t.showViewAllLink=!0,t.viewAllText="View All Recently Accessed",t.items=new Array,t}return __extends(t,e),t}(t.BaseControl);e.RecentlyAccessedService=function(){function e(e,t){this.http=e,this.config=t}return e.prototype.getAll=function(e){return this.http.get(this.config.layoutUrl+"api/recentlyaccessed",{params:e},!0)},e.prototype.getGroupItems=function(e){return this.http.get(this.config.layoutUrl+"api/recentlyaccessed/groups",{params:e},!0)},e.prototype.addRecentlyAccess=function(e){e.groupId,e.resourceValue,e.resourceTypeCode;return this.http.post(this.config.layoutUrl+"api/recentlyaccessed/saverecentlyaccess",JSON.stringify(e),!0)},e}(),e.RecentlyAccessedService=r([n.Injectable(),l(0,n.Inject(t.PlatformHttp)),l(1,n.Inject(t.PfmCoreConfig)),c("design:paramtypes",["function"==typeof(a=void 0!==t.PlatformHttp&&t.PlatformHttp)&&a||Object,"function"==typeof(u=void 0!==t.PfmCoreConfig&&t.PfmCoreConfig)&&u||Object])],e.RecentlyAccessedService);var h,y,v;e.RecentlyAccessedMenuComponent=function(){function e(e,t){this.service=e,this.urlService=t,this.isOpen=!1,this.closeMenu=new n.EventEmitter,this.left="174.84px",this.params=new d,this.viewAllPageId="095FCFA3-EB00-49CB-AB39-F278925A1DA7",this.viewAllUrl="#"}return e.prototype.ngOnInit=function(){var e=this;this.service.getGroupItems(this.params).subscribe(function(t){e.rcntGroupList=t}),this.urlService.getUrl(this.viewAllPageId).subscribe(function(t){e.viewAllUrl=t})},e.prototype.ngAfterViewChecked=function(){if(this.focusItemId){var e=document.getElementById(this.focusItemId);e&&(e.focus(),this.focusItemId=void 0)}},e.prototype.toggleSubMenu=function(e,t,n){void 0===n&&(n=null);var i=e.which||e.keyCode,s=!1;if(32===i||13===i)return null!==n||(this.rcntGroupList[t].isOpen=!this.rcntGroupList[t].isOpen,!1);if(e.shiftKey||9!==i){if(e.shiftKey&&9===i)if(s=!0,null===n){if(0===t)return this.rcntGroupList[t].isOpen=!1,document.getElementById("liFavoriteMenu").focus(),this.closeMenu.emit(),!1}else 0===n&&(this.rcntGroupList[t].isOpen=!1)}else if(null!==n&&n===this.rcntGroupList[t].items.length-1)this.rcntGroupList[t].isOpen=!1;else if(null===n)return this.rcntGroupList[t].isOpen=!0,this.focusItemId="rcntg"+t+"i0",!1;return(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&!1===this.rcntGroupList[t].isOpen?(this.focusItemId=this.rcntGroupList[t].text+t,!s||null===n&&0!==t):void 0},e.prototype.toggleMenu=function(e){var t=e.which||e.keyCode;e.shiftKey&&0!==this.rcntGroupList.length||9!==t||(this.isOpen=!this.isOpen),this.isOpen||(document.getElementById("liRecentMenu").focus(),this.closeMenu.emit())},e}(),r([n.Input(),c("design:type",Boolean)],e.RecentlyAccessedMenuComponent.prototype,"isOpen",void 0),r([n.Input(),c("design:type","function"==typeof(h=void 0!==d&&d)&&h||Object)],e.RecentlyAccessedMenuComponent.prototype,"params",void 0),r([n.Input(),c("design:type",String)],e.RecentlyAccessedMenuComponent.prototype,"viewAllPageId",void 0),r([n.Output(),c("design:type",Object)],e.RecentlyAccessedMenuComponent.prototype,"closeMenu",void 0),e.RecentlyAccessedMenuComponent=r([n.Component({selector:"pfm-menu-recentlyaccessed",template:'<div *ngIf="isOpen" class="fg-menu-container ui-widget ui-widget-content ui-corner-all fg-menu-flyout" id="recentlyAccessedRoot"\n    style="width: 175px; bottom: 24px; top: auto; right: auto; left: 0px; display: block; overflow: visible!important;">\n    <div>\n        <b>Recently Accessed</b>\n    </div>\n    <ul style="width: 175px" class="fg-menu ui-corner-all" aria-activedescendant="active-menuitem" aria-labelledby="recentlyAccessedMenueButton">\n        <li *ngFor="let group of rcntGroupList; let i = index" [hidden]="rcntGroupList.length === 0" (mouseenter)="group.isOpen = true;"\n            (mouseleave)="group.isOpen = false;">\n\n            <a [attr.id]="group.text + i" tabindex="0" class="ui-corner-all fg-menu-indicator" (keydown.enter)="$event.preventDefault()"\n                (keydown)="toggleSubMenu($event, i)">\n                <span>{{group.text}}</span><span class="ui-icon ui-icon-triangle-1-e"></span>\n            </a>\n            <ul class="ui-corner-all ui-widget-content" aria-expanded="true" *ngIf="group.isOpen" [style.left]="left" [class.open]="group.isOpen">\n                <li *ngFor="let item of group.items; let ii = index" (keydown)="toggleSubMenu($event, i, ii)">\n                    <a class="ui-corner-all" [attr.id]="\'rcntg\' + i + \'i\' + ii" [href]="(item.destination + item.querystringParam)" [attr.aria-label]="item.description">{{item.description}}</a>\n                </li>\n            </ul>\n        </li>\n        <li>\n            <a [href]="viewAllUrl" class="ui-corner-all" (keydown)="toggleMenu($event)">View All</a>\n        </li>\n    </ul>\n</div>',styles:[".open { display: block; max-width: none; margin-left: -17px  !important; }",".hide { display: hidden} "]}),l(0,n.Inject(e.RecentlyAccessedService)),l(1,n.Inject(t.UrlService)),c("design:paramtypes",["function"==typeof(y=void 0!==e.RecentlyAccessedService&&e.RecentlyAccessedService)&&y||Object,"function"==typeof(v=void 0!==t.UrlService&&t.UrlService)&&v||Object])],e.RecentlyAccessedMenuComponent);var A,w,R;e.RecentlyAccessedComponent=function(){function e(e,t){this.service=e,this.urlService=t,this.finishedRCNTLoading=!1,this.vm=new g,this.params=new d,this.params.viewAllPageId="095FCFA3-EB00-49CB-AB39-F278925A1DA7",this.params.userTypeCode=1,this.params.pageSize=5,this.vm.showViewAllLink=!0,this.vm.viewAllUrl="#",this.finishedRCNTLoading=!1}return e.prototype.ngOnInit=function(){var e=this;this.urlService.getUrl(this.params.viewAllPageId).subscribe(function(t){e.vm.viewAllUrl=t}),this.service.getAll(this.params).subscribe(function(t){e.finishedRCNTLoading=!0,e.vm.items=t;for(var n=0;n<e.vm.items.length;n++){var i=e.vm.items[n];i.destination.indexOf("?")<=0&&(i.destination+="?"),i.destination.endsWith("?")||(i.destination+="&"),i.destination+="rt="+i.resourceTypeCode+"&rv="+i.resourceValue,i.querystringParam.startsWith("?")&&(i.querystringParam="&"+i.querystringParam.substring(1)),i.lastAccessedDisplayMessage=e.getLastAccessedDisplayText(i.timeSinceAccessed)}})},e.prototype.getLastAccessedDisplayText=function(e){return e.days<1&&e.hours<1&&e.minutes<2?"moments ago":e.days<1&&e.hours<1?e.minutes+" minutes ago":e.days<1?e.hours+" hours ago":e.days+" days ago"},e}(),r([n.Input(),c("design:type","function"==typeof(A=void 0!==d&&d)&&A||Object)],e.RecentlyAccessedComponent.prototype,"params",void 0),e.RecentlyAccessedComponent=r([n.Component({selector:"pfm-widget-recentlyaccessed",template:'\n<div class="widget widget-accessed">\n    <h3 class="external-widget-title">Recently Accessed</h3>\n     <span *ngIf="!finishedRCNTLoading" class="sr-only">recently accessed widget is loading</span>\n       <div *ngIf="finishedRCNTLoading && vm.items.length == 0">\n            Pages that you visit will be displayed here. \n        </div>\n    <div class="widget-content" *ngIf="finishedRCNTLoading && vm.items.length > 0">\n        <ul class="accessed-list">\n            <li *ngFor="let item of vm.items">\n                <i class="{{item.cssClass}}" aria-hidden="true"></i>\n                <a [href]="(item.destination + item.querystringParam)"\n                   [ngbTooltip]="item.title + \' - \' + item.description" placement="bottom" triggers="focus:focusout hover">\n                    <span class="glyphicon visible-xs-inline hidden-md hidden-lg"></span> {{item.title + \' - \' + item.description}}\n                </a>\n                <span class="access-timeframe">{{item.lastAccessedDisplayMessage}}</span>\n            </li>\n        </ul>\n        <div *ngIf="vm.showViewAllLink" class="fav-row">\n            <a [href]="(vm.viewAllUrl)" class="lone-link">\n                <i class="fa fa-angle-right" aria-hidden="true"></i> {{vm.viewAllText}}\n            </a>\n        </div>\n    </div>\n    <md-spinner *ngIf="!finishedRCNTLoading" style="height:80px; width:80px; margin-left:80px; margin-top:45%;" mode="indeterminate"\n            color="primary"></md-spinner>\n</div>\n'}),l(0,n.Inject(e.RecentlyAccessedService)),l(1,n.Inject(t.UrlService)),c("design:paramtypes",["function"==typeof(w=void 0!==e.RecentlyAccessedService&&e.RecentlyAccessedService)&&w||Object,"function"==typeof(R=void 0!==t.UrlService&&t.UrlService)&&R||Object])],e.RecentlyAccessedComponent),e.RecentlyAccessedModule=function(){function e(){}return e}(),e.RecentlyAccessedModule=r([n.NgModule({imports:[i.CommonModule,s.NgbTooltipModule,t.CoreModule,o.MdProgressSpinnerModule],providers:[e.RecentlyAccessedService,s.NgbTooltipConfig],declarations:[e.RecentlyAccessedComponent,e.RecentlyAccessedMenuComponent],exports:[e.RecentlyAccessedComponent,e.RecentlyAccessedMenuComponent]})],e.RecentlyAccessedModule),e.RecentAccessModel=g,e.RecentGroupModel=f,e.RecentItemModel=p,e.RecentlyAccessedInput=d,e.TimeSpanModel=m}(this.pfm_layout_recentlyaccessed=this.pfm_layout_recentlyaccessed||{},pfm_ng_core,vendor._angular_core,vendor._angular_common,vendor._ngbootstrap,vendor._angular_material);